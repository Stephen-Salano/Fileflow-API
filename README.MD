# FileFlow: Media Management & Social Platform

A modern Spring Boot application for secure media upload, processing, and social sharing with JWT authentication, FFmpeg optimization, Apache Tika metadata extraction, and cloud storage integration.

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.4.5-brightgreen.svg)](https://spring.io/projects/spring-boot)
[![Java](https://img.shields.io/badge/Java-21-orange.svg)](https://openjdk.java.net/)
[![React](https://img.shields.io/badge/React-Latest-blue.svg)](https://reactjs.org/)

## ğŸš€ Features

### Current MVP Features
- **Secure Authentication**
    - JWT-based authentication with access and refresh tokens
    - Role-based authorization (USER, ADMIN)
    - Email verification for account security

- **Media Management**
    - Upload and download various media types (images, videos, audio, documents)
    - Automatic metadata extraction using Apache Tika
    - Basic image optimization and resizing

- **Social Interaction**
    - Create and share posts with media attachments
    - Comment on posts
    - Like content
    - User profiles

### Upcoming Features
- **Advanced Media Processing**
    - Video transcoding with FFmpeg
    - Audio optimization
    - Multiple resolution options

- **Enhanced Social Features**
    - Follow/follower system
    - Direct messaging
    - Content discovery
    - Hashtags and trends

- **Cloud Integration**
    - Firebase/cloud storage support
    - Better scalability and performance

## ğŸ› ï¸ Tech Stack

### Backend
- Java 21
- Spring Boot 3.4.5
- Spring Security with JWT
- Spring Data JPA
- PostgreSQL (production)
- H2 Database (testing)
- Apache Tika for metadata extraction
- Spring Mail for email services

### Frontend (In Development)
- React with TypeScript
- Tailwind CSS
- React Query for data fetching
- React Router for navigation

### DevOps & Tools
- Docker for containerization
- Maven for dependency management
- Log4j2 for comprehensive logging
- Git for version control

## ğŸ“‹ Prerequisites

- JDK 21+
- Maven 3.8+
- PostgreSQL 14+
- Docker & Docker Compose (optional, for containerized setup)
- Node.js 20+ (for frontend development)

## ğŸ”§ Setup & Installation

### Backend Setup

1. **Clone the repository**
   ```bash
   git clone https://github.com/Stephen-Salano/fileflow-api.git
   cd fileflow-api
   ```

2. **Configure application properties**

   Create an `application.yml` file in `src/main/resources/` with the following configuration:

   ```yaml
   spring:
     datasource:
       url: jdbc:postgresql://localhost:5432/fileflow
       username: your_username
       password: your_password
     jpa:
       hibernate:
         ddl-auto: update
       show-sql: true
     mail:
       host: smtp.youremailprovider.com
       port: 587
       username: your_email@example.com
       password: your_email_password
       properties:
         mail.smtp.auth: true
         mail.smtp.starttls.enable: true

   # JWT Configuration
   jwt:
     secret-key: your_jwt_secret_key_min_32_chars_long
     access-token-expiration: 900000  # 15 minutes in milliseconds
     refresh-token-expiration: 604800000  # 7 days in milliseconds

   # File Storage Configuration
   storage:
     location: file-uploads
     max-file-size: 5MB
   ```

3. **Build the application**
   ```bash
   mvn clean install
   ```

4. **Run the application**
   ```bash
   mvn spring-boot:run
   ```

   The API will be available at `http://localhost:8080`

### Docker Setup (Alternative)

1. **Build Docker image**
   ```bash
   docker build -t fileflow-api .
   ```

2. **Run with Docker Compose**
   ```bash
   docker-compose up
   ```

## ğŸ“ Project Structure

```
src/main/java/com/stephensalano/fileflow_api/
â”œâ”€â”€ config/                       # Configuration classes
â”‚   â”œâ”€â”€ security/                 # Security-specific configurations
â”‚   â”‚   â”œâ”€â”€ JwtAuthFilter.java    # JWT authentication filter
â”‚   â”‚   â”œâ”€â”€ JwtService.java       # JWT token handling service
â”‚   â”‚   â””â”€â”€ SecurityConfig.java   # Spring Security configuration
â”‚   â”œâ”€â”€ AppConfig.java            # General application configuration
â”‚   â”œâ”€â”€ AuditingConfig.java       # JPA auditing configuration
â”‚   â”œâ”€â”€ CorsConfig.java           # CORS configuration
â”‚   â””â”€â”€ StorageConfig.java        # File storage configuration
â”‚
â”œâ”€â”€ controller/                   # REST Controllers
â”‚   â”œâ”€â”€ AuthController.java       # Authentication endpoints
â”‚   â”œâ”€â”€ UserController.java       # User management endpoints
â”‚   â”œâ”€â”€ MediaController.java      # Media file handling endpoints
â”‚   â”œâ”€â”€ PostController.java       # Social post endpoints
â”‚   â”œâ”€â”€ CommentController.java    # Comment endpoints
â”‚   â””â”€â”€ LikeController.java       # Like/reaction endpoints
â”‚
â”œâ”€â”€ service/                      # Service layer
â”‚   â”œâ”€â”€ auth/                     # Authentication services
â”‚   â”‚   â”œâ”€â”€ AuthService.java      # Authentication service interface
â”‚   â”‚   â””â”€â”€ AuthServiceImpl.java  # Authentication service implementation
â”‚   â”œâ”€â”€ user/                     # User-related services
â”‚   â”‚   â”œâ”€â”€ UserService.java      # User service interface
â”‚   â”‚   â””â”€â”€ UserServiceImpl.java  # User service implementation
â”‚   â”œâ”€â”€ media/                    # Media processing services
â”‚   â”‚   â”œâ”€â”€ MediaService.java     # Media service interface
â”‚   â”‚   â”œâ”€â”€ MediaServiceImpl.java # Media service implementation
â”‚   â”‚   â”œâ”€â”€ FileStorageService.java  # File storage service interface
â”‚   â”‚   â”œâ”€â”€ LocalStorageServiceImpl.java  # Local storage implementation
â”‚   â”‚   â””â”€â”€ CloudStorageServiceImpl.java  # Cloud storage implementation
â”‚   â”œâ”€â”€ processing/               # Media processing services
â”‚   â”‚   â”œâ”€â”€ FFmpegService.java    # FFmpeg processing service interface
â”‚   â”‚   â”œâ”€â”€ FFmpegServiceImpl.java # FFmpeg implementation
â”‚   â”‚   â”œâ”€â”€ MetadataService.java  # Metadata extraction service
â”‚   â”‚   â””â”€â”€ TikaMetadataServiceImpl.java # Apache Tika implementation
â”‚   â””â”€â”€ social/                   # Social feature services
â”‚       â”œâ”€â”€ PostService.java      # Post service interface
â”‚       â”œâ”€â”€ PostServiceImpl.java  # Post service implementation
â”‚       â”œâ”€â”€ CommentService.java   # Comment service interface
â”‚       â”œâ”€â”€ CommentServiceImpl.java # Comment service implementation
â”‚       â”œâ”€â”€ LikeService.java      # Like service interface
â”‚       â””â”€â”€ LikeServiceImpl.java  # Like service implementation
â”‚
â”œâ”€â”€ repository/                   # Data repositories
â”‚   â”œâ”€â”€ UserRepository.java       # User entity repository
â”‚   â”œâ”€â”€ TokenRepository.java      # Refresh token repository
â”‚   â”œâ”€â”€ MediaRepository.java      # Media file metadata repository
â”‚   â”œâ”€â”€ PostRepository.java       # Post repository
â”‚   â”œâ”€â”€ CommentRepository.java    # Comment repository
â”‚   â””â”€â”€ LikeRepository.java       # Like repository
â”‚
â”œâ”€â”€ entity/                       # JPA entities
â”‚   â”œâ”€â”€ User.java                 # User entity
â”‚   â”œâ”€â”€ Role.java                 # User role entity
â”‚   â”œâ”€â”€ Token.java                # JWT refresh token entity
â”‚   â”œâ”€â”€ Media.java                # Media file metadata entity
â”‚   â”œâ”€â”€ Post.java                 # Post entity
â”‚   â”œâ”€â”€ Comment.java              # Comment entity
â”‚   â””â”€â”€ Like.java                 # Like entity
â”‚
â”œâ”€â”€ dto/                          # Data Transfer Objects
â”‚   â”œâ”€â”€ request/                  # Request DTOs
â”‚   â”‚   â”œâ”€â”€ AuthRequest.java      # Authentication request
â”‚   â”‚   â”œâ”€â”€ RegisterRequest.java  # User registration request
â”‚   â”‚   â”œâ”€â”€ MediaUploadRequest.java # Media upload request
â”‚   â”‚   â”œâ”€â”€ PostRequest.java      # Post creation request
â”‚   â”‚   â””â”€â”€ CommentRequest.java   # Comment creation request
â”‚   â””â”€â”€ response/                 # Response DTOs
â”‚       â”œâ”€â”€ AuthResponse.java     # Authentication response with tokens
â”‚       â”œâ”€â”€ UserResponse.java     # User data response
â”‚       â”œâ”€â”€ MediaResponse.java    # Media data response
â”‚       â”œâ”€â”€ PostResponse.java     # Post data response
â”‚       â””â”€â”€ CommentResponse.java  # Comment data response
â”‚
â”œâ”€â”€ exception/                    # Custom exceptions
â”‚   â”œâ”€â”€ GlobalExceptionHandler.java  # Centralized exception handler
â”‚   â”œâ”€â”€ ResourceNotFoundException.java  # Entity not found exception
â”‚   â”œâ”€â”€ BadRequestException.java  # Invalid request exception
â”‚   â”œâ”€â”€ StorageException.java     # File storage exception
â”‚   â”œâ”€â”€ ProcessingException.java  # Media processing exception
â”‚   â””â”€â”€ SecurityException.java    # Security-related exceptions
â”‚
â”œâ”€â”€ util/                         # Utility classes
â”‚   â”œâ”€â”€ FileUtils.java            # File handling utilities
â”‚   â”œâ”€â”€ SecurityUtils.java        # Security-related utilities
â”‚   â””â”€â”€ ValidationUtils.java      # Input validation utilities
â”‚
â”œâ”€â”€ event/                        # Event listeners and publishers
â”‚   â”œâ”€â”€ MediaUploadEvent.java     # Media upload event class
â”‚   â”œâ”€â”€ MediaProcessingEvent.java # Media processing event
â”‚   â””â”€â”€ MediaEventListener.java   # Event listener for async processing
â”‚
â”œâ”€â”€ model/                        # Non-entity model classes
â”‚   â”œâ”€â”€ FileMetadata.java         # File metadata model
â”‚   â””â”€â”€ ProcessingOptions.java    # Processing options model
â”‚
â””â”€â”€ FileflowApiApplication.java   # Main application class
```

## ğŸ”’ API Endpoints

### Authentication Endpoints
- `POST /api/v1/auth/register` - Register a new user
- `POST /api/v1/auth/authenticate` - Login and get JWT tokens
- `POST /api/v1/auth/refresh-token` - Refresh access token
- `POST /api/v1/auth/logout` - Logout user (invalidate tokens)
- `GET /api/v1/auth/verify` - Verify email with token

### User Endpoints
- `GET /api/v1/users/me` - Get current user profile
- `PUT /api/v1/users/me` - Update user profile
- `PUT /api/v1/users/password` - Change password

### Media Endpoints
- `POST /api/v1/media` - Upload media file
- `GET /api/v1/media` - Get user's media files
- `GET /api/v1/media/{id}` - Get specific media file metadata
- `GET /api/v1/media/file/{id}` - Download media file
- `DELETE /api/v1/media/{id}` - Delete media file

### Social Endpoints
- `POST /api/v1/posts` - Create new post
- `GET /api/v1/posts` - Get feed posts
- `GET /api/v1/posts/{id}` - Get specific post
- `PUT /api/v1/posts/{id}` - Update post
- `DELETE /api/v1/posts/{id}` - Delete post
- `POST /api/v1/posts/{id}/comments` - Add comment to post
- `GET /api/v1/posts/{id}/comments` - Get post comments
- `POST /api/v1/posts/{id}/likes` - Like a post
- `DELETE /api/v1/posts/{id}/likes` - Unlike a post

## ğŸ“Š Development Roadmap

### Phase 1: MVP (Current)
- Authentication system
- Basic file upload/download
- Simple image optimization
- Core social features

### Phase 2: Enhanced Media Processing
- Video processing with FFmpeg
- Audio optimization
- Multiple resolution options
- Advanced metadata extraction

### Phase 3: Advanced Social Features
- Follow/follower system
- Direct messaging
- Content discovery algorithms
- Notifications system

### Phase 4: Cloud Integration & Scaling
- Firebase/Cloud storage integration
- Performance optimizations
- Analytics and monitoring
- Mobile responsive frontend

## ğŸ§ª Testing

Run tests with Maven:

```bash
# Run all tests
mvn test

# Run specific test class
mvn test -Dtest=AuthServiceTest

# Run with coverage report
mvn test jacoco:report
```

## ğŸ¤ Contributing

Contributions are welcome! To contribute:

1. Fork the repository
2. Create your feature branch: `git checkout -b feature/amazing-feature`
3. Commit your changes: `git commit -m 'Add some amazing feature'`
4. Push to the branch: `git push origin feature/amazing-feature`
5. Open a Pull Request

Please make sure to update tests as appropriate.

## ğŸ“„ License

This project is licensed under the MIT License - see the LICENSE file for details.

## ğŸ“¬ Contact

LinkedIn - [Stephen Salano](www.linkedin.com/in/stephen-salano)

Project Link: [https://github.com/Stephen-Salano/fileflow-api](https://github.com/Stephen-Salano/fileflow-api)
